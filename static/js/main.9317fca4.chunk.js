(this.webpackJsonpextractor=this.webpackJsonpextractor||[]).push([[0],{37:function(e,t){},38:function(e,t){},39:function(e,t){},52:function(e,t){},53:function(e,t){},54:function(e,t){},55:function(e,t){},56:function(e,t){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var i=a(0),s=a(2),n=a.n(s),r=a(27),o=a.n(r),l=a(5),c=a(6),u=a(1),h=a(8),d=a(7),p=a(3),m=a.n(p),v=n.a.forwardRef((function(e,t){return Object(i.jsx)("button",{ref:t,onClick:e.handleClick,title:e.title,className:e.className,children:e.children})})),f=a(4);var b=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={file:null},i.updateViewBoxPosition=i.updateViewBoxPosition.bind(Object(u.a)(i)),i.setZoom=i.setZoom.bind(Object(u.a)(i)),i.resetPosition=i.resetPosition.bind(Object(u.a)(i)),i.clearCanvas=i.clearCanvas.bind(Object(u.a)(i)),i.cropImage=i.cropImage.bind(Object(u.a)(i)),i.loadRasterImage=i.loadRasterImage.bind(Object(u.a)(i)),i.loadSVGImage=i.loadSVGImage.bind(Object(u.a)(i)),i.loadResultSVGImage=i.loadResultSVGImage.bind(Object(u.a)(i)),i.loadCropedImage=i.loadCropedImage.bind(Object(u.a)(i)),i.cancelMask=i.cancelMask.bind(Object(u.a)(i)),i.onKeyDown=i.onKeyDown.bind(Object(u.a)(i)),i.removeOldImage=i.removeOldImage.bind(Object(u.a)(i)),i.wrapper=n.a.createRef(),i.paperId=n.a.createRef(),i.crBlob=null,i.crImgUrl=null,i.paper=null,i.mask=null,i.startPos=null,i.moveFlag=!1,i.newFlag=!1,i.mdp=null,i.pausePanning=!1,i.allowedTypes=["image/jpeg","image/png","image/svg+xml"],i.imageOptions={hasControls:!1,hasBorders:!1,lockMovementX:!0,lockMovementY:!0,lockScalingX:!0,lockScalingY:!0,lockScewingX:!0,lockScewingY:!0,lockRotation:!0,selectable:!1,hoverCursor:"default"},i}return Object(c.a)(a,[{key:"onMouseWheel",value:function(e){var t=this.paper.getPointer(e),a=new f.fabric.Point(t.x,t.y);this.props.onMouseWheelZoom(e.e.deltaY<0,a),e.e.preventDefault(),e.e.stopPropagation()}},{key:"onMouseDown",value:function(e){e.e.type.startsWith("touch")||(this.mdp={x:e.e.screenX,y:e.e.screenY},e.e.ctrlKey||(this.startPos=this.paper.getPointer(e),null==this.mask&&(this.mask=new f.fabric.Rect({fill:"rgba(255,255,0,0.2)",stroke:"red",strokeDashArray:[8,8],"stroke-width":2,opacity:1,left:this.startPos.x,top:this.startPos.y,width:0,height:0,evented:!0,selectable:!0,lockScewingX:!0,lockScewingY:!0,lockRotation:!0,selectionBorderColor:"red",transparentCorners:!0,cornerColor:"red",cornerStrokeColor:"red",hasBorder:!1,id:"mask"}),this.paper.add(this.mask),this.mask.setControlVisible("mtr",!1),this.paper.requestRenderAll(),this.newFlag=!0)))}},{key:"onMouseUp",value:function(e){if(!e.e.type.startsWith("touch")){if(e.e.ctrlKey)this.updateViewBoxPosition(e);else if(null!=this.mask)if(this.moveFlag){var t=this.paper.getPointer(e);this.mask.set({width:Math.abs(t.x-this.startPos.x),height:Math.abs(t.y-this.startPos.y)});var a={left:this.startPos.x,top:this.startPos.y};t.x<this.startPos.x&&(a.left=t.x),t.y<this.startPos.y&&(a.top=t.y),this.mask.setCoords(a),this.paper.setActiveObject(this.mask),this.paper.requestRenderAll()}else this.newFlag&&(this.paper.remove(this.mask),this.mask=null);this.moveFlag=!1,this.newFlag=!1,this.startPos=null,this.mdp=null}}},{key:"onMouseMove",value:function(e){if(!e.e.type.startsWith("touch"))if(e.e.ctrlKey)this.updateViewBoxPosition(e);else if(null!=this.mask&&null!=this.startPos&&this.newFlag){var t=this.paper.getPointer(e),a=t.x-this.startPos.x,i=t.y-this.startPos.y;this.mask.set({width:a,height:i}),this.paper.requestRenderAll(),this.moveFlag=!0}}},{key:"onWindowResize",value:function(e){this.paper.setWidth(this.wrapper.current.offsetWidth),this.paper.setHeight(this.wrapper.current.offsetHeight),this.paper.renderAll()}},{key:"updateViewBoxPosition",value:function(e){if(!e.e.type.startsWith("touch")&&null!=this.mdp){var t=e.e.screenX-this.mdp.x,a=e.e.screenY-this.mdp.y;this.mdp={x:e.e.screenX,y:e.e.screenY};var i=new f.fabric.Point(t,a);this.paper.relativePan(i)}}},{key:"setZoom",value:function(e,t){var a=t;null==a&&(a=this.paper.getVpCenter()),this.paper.zoomToPoint(a,e)}},{key:"resetPosition",value:function(){this.paper.absolutePan(new f.fabric.Point(0,0))}},{key:"onKeyDown",value:function(e){27===e.keyCode&&this.cancelMask(e)}},{key:"cancelMask",value:function(e){this.moveFlag=!1,this.newFlag=!1,this.startPos=null,null!=this.mask&&(this.paper.remove(this.mask),this.mask=null),this.paper.requestRenderAll()}},{key:"removeOldImage",value:function(){if(null!=this.props.resetZoom&&this.props.resetZoom(),this.resetPosition(),this.moveFlag=!1,this.newFlag=!1,this.mask=null,null!=this.paper){var e=this.paper,t=this.paper.getObjects();null!=t&&(t=t.reverse()).forEach((function(t){e.remove(t)})),this.paper.clear(),this.paper.requestRenderAll()}}},{key:"clearCanvas",value:function(){this.removeOldImage(),this.setState({file:null})}},{key:"cropImage",value:function(){if(null!=this.paper){var e=this.paper.getObjects();if(null!=e&&null!=this.mask){var t=e[0],a=this.mask,i=t.getCoords(),s=a.getCoords(),n=i[0].x;s[0].x>n&&(n=s[0].x);var r=i[0].y;s[0].y>r&&(r=s[0].y);var o=i[2].y;s[2].y<o&&(o=s[2].y);var l=i[1].x;s[1].x<l&&(l=s[1].x);var c=this.paper.getZoom(),u=(n-i[0].x)/(t.scaleX*c),h=(r-i[0].y)/(t.scaleY*c),d=(l-n)/(t.scaleX*c),p=(o-r)/(t.scaleY*c);t.dirty=!0,this.paper.remove(a),this.paper.renderAll();var m={left:u,top:h,width:d,height:p,withoutTransform:!0,withoutShadow:!0},v=t.toDataURL(m),b=function(e,t,a){t=t||"",a=a||512;for(var i=atob(e),s=[],n=0;n<i.length;n+=a){for(var r=i.slice(n,n+a),o=new Array(r.length),l=0;l<r.length;l++)o[l]=r.charCodeAt(l);var c=new Uint8Array(o);s.push(c)}return new Blob(s,{type:t})}(v.split(",")[1],"image/png");this.crBlob=b,this.crImgUrl=v,f.fabric.Image.fromURL(v,this.loadCropedImage)}}}},{key:"loadCropedImage",value:function(e){this.clearCanvas(),e.set(this.imageOptions),e.set({id:"croped"}),e.height>e.width?e.scaleToHeight(this.paper.getHeight()):e.scaleToWidth(this.paper.getWidth()),this.paper.add(e),e.center().setCoords(),this.paper.requestRenderAll(),this.paper.fire("object:modified"),null!=this.props.shieldHandler&&this.props.shieldHandler(!1)}},{key:"loadResultSVGImage",value:function(e){this.clearCanvas(),f.fabric.loadSVGFromString(e,this.loadSVGImage,null,{crossOrigin:"anonymous"})}},{key:"loadSVGImage",value:function(e,t){var a=f.fabric.util.groupSVGElements(e,t);a.set(this.imageOptions),this.paper.add(a),a.center().setCoords(),this.paper.renderAll(),this.paper.fire("object:modified"),null!=this.props.shieldHandler&&this.props.shieldHandler(!1)}},{key:"loadRasterImage",value:function(e){e.set(this.imageOptions),e.set({id:"target"}),e.height>e.width?e.scaleToHeight(this.paper.getHeight()):e.scaleToWidth(this.paper.getWidth()),this.paper.add(e),e.center().setCoords(),this.paper.renderAll(),this.paper.fire("object:modified"),null!=this.props.shieldHandler&&this.props.shieldHandler(!1)}},{key:"initCanvas",value:function(){this.paper.selection=!1,null!=this.props.onMouseWheelZoom&&this.paper.on("mouse:wheel",this.onMouseWheel.bind(this)),this.paper.on("mouse:down",this.onMouseDown.bind(this)),this.paper.on("mouse:up",this.onMouseUp.bind(this)),this.paper.on("mouse:move",this.onMouseMove.bind(this)),this.paper.on("mouse:move",this.onMouseMove.bind(this)),window.addEventListener("resize",this.onWindowResize.bind(this))}},{key:"componentDidMount",value:function(){this.paper=new f.fabric.Canvas(this.paperId.current.id,{height:this.wrapper.current.offsetHeight,width:this.wrapper.current.offsetWidth}),this.wrapper.current.tabIndex=1,this.wrapper.current.addEventListener("keydown",this.onKeyDown,!0),this.initCanvas()}},{key:"componentDidUpdate",value:function(e,t){if(this.props.zoom!==this.paper.getZoom()&&this.setZoom(this.props.zoom,this.props.point),null!==this.state.file){var a=this.state.file;if(this.clearCanvas(),this.allowedTypes.includes(a.type)){var i=new FileReader,s=null;if("image/svg+xml"===a.type)return s=this.loadSVGImage,i.onload=function(e){f.fabric.loadSVGFromString(e.target.result,s,null,{crossOrigin:"anonymous"})},void i.readAsText(a);s=this.loadRasterImage,i.onload=function(e){f.fabric.Image.fromURL(e.target.result,s)},i.readAsDataURL(a)}}}},{key:"render",value:function(){return Object(i.jsx)("div",{className:"main",children:Object(i.jsx)("div",{className:"canvasWrapper",ref:this.wrapper,children:Object(i.jsx)("canvas",{id:"canvasElementId",className:"paper",ref:this.paperId})})})}}]),a}(n.a.Component),g=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={active:!1,value:null},i.decrementButton=n.a.createRef(),i.incrementButton=n.a.createRef(),i.mainContainer=n.a.createRef(),i.input=n.a.createRef(),i.leftSeparator=n.a.createRef(),i.rightSeparator=n.a.createRef(),i.update=i.update.bind(Object(u.a)(i)),i.onKeyDown=i.onKeyDown.bind(Object(u.a)(i)),i.onBlurI=i.onBlurI.bind(Object(u.a)(i)),i.onFocusI=i.onFocusI.bind(Object(u.a)(i)),i.oldInputValue=null,i}return Object(c.a)(a,[{key:"update",value:function(e,t){var a;if(null!=e&&this.state.active===e.active||(a=this.mainContainer.current.getAttribute("class"),a=this.state.active?m()(a,{active:!0,inactive:!1}):m()(a,{active:!1,inactive:!0}),this.mainContainer.current.setAttribute("class",a)),this.state.active&&(null!=t&&this.props.leftSeparator===t.leftSeparator||(a=this.leftSeparator.current.getAttribute("class"),a=this.props.leftSeparator?m()(a,{active:!0,inactive:!1}):m()(a,{active:!1,inactive:!0}),this.leftSeparator.current.setAttribute("class",a)),null!=t&&this.props.rightSeparator===t.rightSeparator||(a=this.rightSeparator.current.getAttribute("class"),a=this.props.rightSeparator?m()(a,{active:!0,inactive:!1}):m()(a,{active:!1,inactive:!0}),this.rightSeparator.current.setAttribute("class",a)),null==t?null==e&&(this.input.current.value=this.state.value):null!=t&&this.props.currentValue===this.input.current.value||(this.input.current.value=this.props.currentValue),null!=this.input.current)){var i=parseFloat(this.input.current.value),s=parseFloat(this.input.current.min),n=parseFloat(this.input.current.max);null!=this.decrementButton.current&&(!isNaN(i)&&i>s?this.decrementButton.current.disabled=!1:this.decrementButton.current.disabled=!0),null!=this.incrementButton.current&&(!isNaN(i)&&i<n?this.incrementButton.current.disabled=!1:this.incrementButton.current.disabled=!0)}}},{key:"onKeyDown",value:function(e){null!=this.props.blurAndEnterHandler&&13===e.keyCode&&this.oldInputValue!==this.input.current.value&&(this.props.blurAndEnterHandler(parseFloat(this.input.current.value)),this.oldInputValue=this.input.current.value)}},{key:"onBlurI",value:function(e){null!=this.props.blurAndEnterHandler&&this.oldInputValue!==this.input.current.value&&(this.props.blurAndEnterHandler(this.input.current.value),this.oldInputValue=null)}},{key:"onFocusI",value:function(e){null!=this.props.blurAndEnterHandler&&(this.oldInputValue=this.input.current.value)}},{key:"componentDidUpdate",value:function(e,t){this.update(t,e)}},{key:"componentDidMount",value:function(){this.input.current.addEventListener("keydown",this.onKeyDown,!0),this.update()}},{key:"render",value:function(){var e="inactive blockdiv";return null!=this.props.className&&(e+=" "+this.props.className),Object(i.jsxs)("div",{className:e,ref:this.mainContainer,children:[Object(i.jsx)("div",{ref:this.leftSeparator,className:"separator inactive"}),Object(i.jsx)(v,{ref:this.decrementButton,title:this.props.dbTitle,handleClick:this.props.dbCallback,children:Object(i.jsx)("img",{alt:this.props.dbTitle,src:this.props.dbIconSrc})}),Object(i.jsx)("input",{className:"value_input",ref:this.input,type:"text",placeholder:this.props.prompt,min:this.props.minValue,max:this.props.maxValue,step:this.props.step,onBlur:this.onBlurI,onFocus:this.onFocusI}),Object(i.jsx)(v,{ref:this.incrementButton,title:this.props.ibTitle,handleClick:this.props.ibCallback,children:Object(i.jsx)("img",{alt:this.props.ibTitle,src:this.props.ibIconSrc})}),Object(i.jsx)("div",{ref:this.rightSeparator,className:"separator inactive"}),this.props.children]})}}]),a}(n.a.Component),j=a(40),O=a(57);j.GlobalWorkerOptions.workerSrc=O;var k=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={totalPageNumber:0,currentPage:0,paperSetImage:null,paperRemoveOldImage:null,file:null},i.hiddenCanvas=n.a.createRef(),i.pager=n.a.createRef(),i.update=i.update.bind(Object(u.a)(i)),i.loadPdfFile=i.loadPdfFile.bind(Object(u.a)(i)),i.saveImageToState=i.saveImageToState.bind(Object(u.a)(i)),i.loadPage=i.loadPage.bind(Object(u.a)(i)),i.loadPdfDocument=i.loadPdfDocument.bind(Object(u.a)(i)),i.loadPage=i.loadPage.bind(Object(u.a)(i)),i.renderPage=i.renderPage.bind(Object(u.a)(i)),i.processError=i.processError.bind(Object(u.a)(i)),i.changePage=i.changePage.bind(Object(u.a)(i)),i.setCurrentPage=i.setCurrentPage.bind(Object(u.a)(i)),i.pdfDocument=null,i}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.update()}},{key:"componentWillUnmount",value:function(){this.pdfDocument=null,this.setState({currentPage:0,totalPageNumber:0})}},{key:"componentDidUpdate",value:function(e,t){if(this.update(t)&&null!==this.state.file&&this.state.file.name.endsWith(".pdf")&&null!=t){if(t.file!==this.state.file)return void this.loadPdfFile(this.state.file);this.state.totalPageNumber>=1&&this.state.currentPage<=this.state.totalPageNumber&&null!=this.pdfDocument&&this.state.currentPage!==t.currentPage&&this.loadPage(parseInt(this.state.currentPage),this.pdfDocument)}}},{key:"saveImageToState",value:function(){var e=this.hiddenCanvas.current.toDataURL("image/png");null!=e&&null!=this.state.paperSetImage&&f.fabric.Image.fromURL(e,this.state.paperSetImage)}},{key:"loadPage",value:function(e,t){null!=this.props.shieldHandler&&this.props.shieldHandler(!0),null!=this.state.paperRemoveOldImage&&this.state.paperRemoveOldImage(),t.getPage(e).then(this.renderPage)}},{key:"renderPage",value:function(e){var t=e.getViewport({scale:8}),a=this.hiddenCanvas.current.getContext("2d");this.hiddenCanvas.current.height=t.height,this.hiddenCanvas.current.width=t.width,e.render({canvasContext:a,viewport:t}).promise.then(this.saveImageToState)}},{key:"loadPdfDocument",value:function(e){this.pdfDocument=e,this.setState({totalPageNumber:e.numPages,currentPage:1})}},{key:"processError",value:function(e){console.log(e)}},{key:"loadPdfFile",value:function(e){var t=new FileReader,a=this.loadPdfDocument,i=this.processError;this.pdfDocument=null,this.setState({currentPage:0,totalPageNumber:0}),t.onload=function(e){var t=new Uint8Array(e.target.result);j.getDocument(t).promise.then(a,i)},null!=this.props.shieldHandler&&this.props.shieldHandler(!0),t.readAsArrayBuffer(e)}},{key:"update",value:function(e){var t=null!=this.state.file&&this.state.file.name.endsWith(".pdf");return this.pager.current.state.active!==t&&this.pager.current.setState({active:t}),t}},{key:"changePage",value:function(e){if(this.state.totalPageNumber>0){var t=parseInt(this.state.currentPage);isNaN(t)||(e?t--:t++,this.setCurrentPage(t))}}},{key:"setCurrentPage",value:function(e){e<1&&(e=1),e>this.state.totalPageNumber&&(e=this.state.totalPageNumber),this.setState({currentPage:e})}},{key:"render",value:function(){var e=this,t=this.state.totalPageNumber,a=this.state.currentPage;return Object(i.jsx)(g,{ref:this.pager,dbIconSrc:"assets/chevron-back-circle-outline.svg",ibIconSrc:"assets/chevron-forward-circle-outline.svg",dbTitle:"Previous page",ibTitle:"Next page",dbCallback:function(){return e.changePage(!0)},ibCallback:function(){return e.changePage(!1)},prompt:"Page Nr",minValue:1,maxValue:t,step:1,leftSeparator:!0,className:"pager",blurAndEnterHandler:function(t){e.setCurrentPage(t)},currentValue:a,children:Object(i.jsx)("canvas",{id:"hiddenCanvasForPdfId",ref:this.hiddenCanvas,style:{display:"none"}})})}}]),a}(n.a.Component),y=n.a.forwardRef((function(e,t){return Object(i.jsxs)("div",{className:"shield inactive",ref:t,children:[Object(i.jsx)("div",{className:"viewer-busyind"}),e.children]})})),x=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={modal:!0,active:!1},i.ok=n.a.createRef(),i.cancel=n.a.createRef(),i.dialogWrapper=n.a.createRef(),i.content=n.a.createRef(),i.shield=n.a.createRef(),i.doAccept=i.doAccept.bind(Object(u.a)(i)),i.doCancel=i.doCancel.bind(Object(u.a)(i)),i.show=i.show.bind(Object(u.a)(i)),i.hide=i.hide.bind(Object(u.a)(i)),i}return Object(c.a)(a,[{key:"show",value:function(){var e=this.dialogWrapper.current.getAttribute("class");e=m()(e,{active:!0,inactive:!1}),this.dialogWrapper.current.setAttribute("class",e),this.state.modal&&(e=this.shield.current.getAttribute("class"),e=m()(e,{active:!0,inactive:!1}),this.shield.current.setAttribute("class",e))}},{key:"hide",value:function(){var e=this.shield.current.getAttribute("class");e=m()(e,{active:!1,inactive:!0}),this.shield.current.setAttribute("class",e),e=this.dialogWrapper.current.getAttribute("class"),e=m()(e,{active:!1,inactive:!0}),this.dialogWrapper.current.setAttribute("class",e)}},{key:"doAccept",value:function(){null!=this.props.acceptCallback&&this.props.acceptCallback(),this.setState({active:!1})}},{key:"doCancel",value:function(){this.setState({active:!1})}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){null!=t&&this.state.active===t.active||(this.state.active?this.show():this.hide())}},{key:"render",value:function(){var e=this,t=this.props.title,a="dlgtitle"+(null==t?" inactive":" active");return Object(i.jsxs)("div",{className:"inactive dialogwrapper",ref:this.dialogWrapper,children:[Object(i.jsx)("div",{className:"shield inactive",ref:this.shield}),Object(i.jsxs)("div",{className:"dlg",children:[Object(i.jsx)("div",{className:a,children:t}),Object(i.jsx)("div",{className:"dlgcontent",ref:this.content,children:this.props.children}),Object(i.jsxs)("div",{className:"toolbar",children:[Object(i.jsx)(v,{name:"ok",title:"Accept",ref:this.ok,className:"active",handleClick:function(){return e.doAccept()},children:"Ok"}),Object(i.jsx)("div",{className:"filler"}),Object(i.jsx)(v,{name:"cancel",title:"Cancel",ref:this.cancel,className:"active",handleClick:function(){return e.doCancel()},children:"Cancel"})]})]})]})}}]),a}(n.a.Component),w=n.a.createContext(1),P=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).pap=n.a.createRef(),i.hiddenFileInput=n.a.createRef(),i.pdfRend=n.a.createRef(),i.zoomer=n.a.createRef(),i.busyind=n.a.createRef(),i.modDialog=n.a.createRef(),i.processFiles=i.processFiles.bind(Object(u.a)(i)),i.loadImage=i.loadImage.bind(Object(u.a)(i)),i.doZoom=i.doZoom.bind(Object(u.a)(i)),i.setZoom=i.setZoom.bind(Object(u.a)(i)),i.setShieldActive=i.setShieldActive.bind(Object(u.a)(i)),i.showModalDialog=i.showModalDialog.bind(Object(u.a)(i)),i.onDialogAccept=i.onDialogAccept.bind(Object(u.a)(i)),i.doVectorizeExtern=i.doVectorizeExtern.bind(Object(u.a)(i)),i.doVectorizeIntern=i.doVectorizeIntern.bind(Object(u.a)(i)),i.showSVGResult=i.showSVGResult.bind(Object(u.a)(i)),i.state={zoom:"1.0",point:null},i.zoomFactor=.05,i.minZoom=.05,i.maxZoom=5,i}return Object(c.a)(a,[{key:"setShieldActive",value:function(e){if(null!=this.busyind.current){var t=this.busyind.current.getAttribute("class");t=e?m()(t,{active:!0,inactive:!1}):m()(t,{active:!1,inactive:!0}),this.busyind.current.setAttribute("class",t)}}},{key:"showModalDialog",value:function(){null!=this.modDialog.current&&this.modDialog.current.setState({active:!0})}},{key:"processFiles",value:function(e){null!=e.target.files&&1===e.target.files.length&&((this.pap.current.allowedTypes.includes(e.target.files.item(0).type)||e.target.files.item(0).name.endsWith(".pdf"))&&(this.setShieldActive(!0),this.pap.current.crBlob=null,this.pap.current.crImgUrl=null,this.pdfRend.current.setState({paperSetImage:this.pap.current.loadRasterImage,file:e.target.files.item(0)}),this.pap.current.setState({file:e.target.files.item(0)})),e.target.value=null)}},{key:"doZoom",value:function(e,t){var a=e?this.zoomFactor:-this.zoomFactor,i=parseFloat(this.state.zoom)+a;this.setZoom(i,t)}},{key:"setZoom",value:function(e,t){var a=parseFloat(e);a>this.maxZoom&&(a=this.maxZoom),a<this.minZoom&&(a=this.minZoom),this.setState({zoom:parseFloat(a).toPrecision(3),point:t})}},{key:"componentDidMount",value:function(){this.pdfRend.current.setState({paperSetImage:this.pap.current.loadRasterImage,paperRemoveOldImage:this.pap.current.removeOldImage}),this.zoomer.current.setState({active:!0})}},{key:"componentDidUpdate",value:function(e,t){}},{key:"loadImage",value:function(e){e.preventDefault(),this.hiddenFileInput.current.click()}},{key:"onDialogAccept",value:function(){console.log("Dialog content accepted")}},{key:"doVectorizeExtern",value:function(e){if(null!=e){this.setShieldActive(!0);var t=new XMLHttpRequest;t.open("POST","https://api.vectorizer.io/v3/vectorize?apikey=69936907-18666295&colors=8&minarea=5&threshold=20&input=clipart&output=svg&svgversion=1.1",!0),t.setRequestHeader("Cache-Control","no-cache"),t.setRequestHeader("Content-Type","multipart/form-data"),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=t.responseText;console.log(e.type)}else console.log("Vectorize error: "+t.status)},t.send(e)}}},{key:"showSVGResult",value:function(e){this.pap.current.loadResultSVGImage(e)}},{key:"doVectorizeIntern",value:function(e){null!=e&&(this.setShieldActive(!0),null!=window.ImageTracer&&window.ImageTracer.imageToSVG(e,this.showSVGResult))}},{key:"render",value:function(){var e=this,t=this.state.zoom,a=this.state.point;return Object(i.jsxs)("div",{className:"main",children:[Object(i.jsxs)(w.Provider,{value:t,children:[Object(i.jsxs)("div",{className:"toolbar shadow",children:[Object(i.jsx)(v,{name:"load",title:"Load file",className:"active",handleClick:function(t){return e.loadImage(t)},children:Object(i.jsx)("img",{alt:"Load file",src:"assets/image-outline.svg"})}),Object(i.jsx)(v,{name:"clear",title:"Clear canvas",className:"active",handleClick:function(){e.pap.current.clearCanvas(),e.pdfRend.current.setState({file:null})},children:Object(i.jsx)("img",{alt:"Clear canvas",src:"assets/close-circle-outline.svg"})}),Object(i.jsx)(v,{name:"crop",title:"Crop image",className:"active",handleClick:function(){e.pap.current.cropImage(),e.setShieldActive(!0)},children:Object(i.jsx)("img",{alt:"Crop",src:"assets/crop-outline.svg"})}),Object(i.jsx)(v,{name:"to_vector",title:"Vectorize",className:"active",handleClick:function(){return e.doVectorizeExtern(e.pap.current.crBlob)},children:Object(i.jsx)("img",{alt:"Vectorize",src:"assets/vector.svg"})}),Object(i.jsx)(v,{name:"save",title:"Save",className:"active",handleClick:function(){return e.showModalDialog()},children:Object(i.jsx)("img",{alt:"Save",src:"assets/save-outline.svg"})}),Object(i.jsx)(k,{ref:this.pdfRend,shieldHandler:this.setShieldActive}),Object(i.jsx)("div",{className:"filler"}),Object(i.jsx)(v,{name:"reset_position",title:"Reset position",className:"active",handleClick:function(){return e.pap.current.resetPosition()},children:Object(i.jsx)("img",{alt:"Reset position",src:"assets/locate.svg"})}),Object(i.jsx)(v,{name:"reset_zoom",title:"Reset zoom",className:"active",handleClick:function(){return e.setState({zoom:1})},children:Object(i.jsx)("img",{alt:"Reset zoom",src:"assets/zoom-to-actual-size.svg"})}),Object(i.jsx)(g,{ref:this.zoomer,dbIconSrc:"assets/zoom-in.svg",ibIconSrc:"assets/zoom-out.svg",dbTitle:"Zoom in",ibTitle:"Zoom out",dbCallback:function(){return e.doZoom(!0)},ibCallback:function(){return e.doZoom(!1)},prompt:"Zoom",minValue:.05,maxValue:5,step:.05,className:"zoomer",blurAndEnterHandler:function(t){e.setZoom(t)},currentValue:t})]}),Object(i.jsx)("div",{className:"sand shadow",children:Object(i.jsx)(b,{ref:this.pap,zoom:t,point:a,onMouseWheelZoom:this.doZoom,resetZoom:function(){return e.setState({zoom:1})},shieldHandler:this.setShieldActive})})]}),Object(i.jsx)("input",{ref:this.hiddenFileInput,type:"file",style:{display:"none"},onChange:this.processFiles}),Object(i.jsx)(y,{ref:this.busyind}),Object(i.jsxs)(x,{ref:this.modDialog,acceptCallback:this.onDialogAccept,title:"Save dialog",children:[Object(i.jsxs)("div",{className:"dlgrow",children:[Object(i.jsx)("label",{children:"Measurement"}),Object(i.jsx)("input",{type:"text",placeholder:"30 ft"})]}),Object(i.jsxs)("div",{className:"dlgrow",children:[Object(i.jsx)("label",{children:"File name"}),Object(i.jsx)("input",{type:"text"})]})]})]})}}]),a}(n.a.Component);a(59);o.a.render(Object(i.jsx)(P,{}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.9317fca4.chunk.js.map